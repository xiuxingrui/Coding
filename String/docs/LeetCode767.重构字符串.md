# [LeetCode767.重构字符串](https://leetcode-cn.com/problems/reorganize-string/)
## 题目描述
给定一个字符串`S`，检查是否能重新排布其中的字母，使得两相邻的字符不同。

若可行，输出任意可行的结果。若不可行，返回空字符串。

- `S` 只包含小写字母并且长度在`[1, 500]`区间内。

### 示例
```
输入: S = "aab"
输出: "aba"
```
```
输入: S = "aaab"
输出: ""
```
## 题解
首先统计每个字母的出现次数，然后根据每个字母的出现次数重构字符串。

当 `n` 是奇数且出现最多的字母的出现次数是 `(n+1)/2` 时，出现次数最多的字母必须全部放置在偶数下标，否则一定会出现相邻的字母相同的情况。其余情况下，每个字母放置在偶数下标或者奇数下标都是可行的。

维护偶数下标 `evenIndex` 和奇数下标 `oddIndex`，初始值分别为 0 和 1。遍历每个字母，根据每个字母的出现次数判断字母应该放置在偶数下标还是奇数下标。

首先考虑是否可以放置在奇数下标。根据上述分析可知，只要字母的出现次数不超过字符串的长度的一半（即出现次数小于或等于 `n/2`），就可以放置在奇数下标，只有当字母的出现次数超过字符串的长度的一半时，才必须放置在偶数下标。字母的出现次数超过字符串的长度的一半只可能发生在 `n` 是奇数的情况下，且最多只有一个字母的出现次数会超过字符串的长度的一半。

因此通过如下操作在重构的字符串中放置字母。

如果字母的出现次数大于 0 且小于或等于 `n/2`，且 `oddIndex` 没有超出数组下标范围，则将字母放置在 `oddIndex`，然后将 `oddIndex` 的值加 2。

如果字母的出现次数大于 `n/2`，或 `oddIndex` 超出数组下标范围，则将字母放置在 `evenIndex`，然后将 `evenIndex` 的值加 2。

如果一个字母出现了多次，则重复上述操作，直到该字母全部放置完毕。

```java
class Solution {
    public String reorganizeString(String S) {
        int len=S.length();
        int[] cnt=new int[26];
        for(char c:S.toCharArray()){
            cnt[c-'a']++;
            if(cnt[c-'a']>(len+1)/2){
                return "";
            }
        }
        char[] arr=new char[len];
        int evenIndex=0,oddIndex=1;
        for(int i=0;i<26;i++){
            if(cnt[i]>0){
                char temp=(char)('a'+i);
                while(cnt[i]>0&&cnt[i]<=len/2&&oddIndex<len){
                    arr[oddIndex]=temp;
                    oddIndex+=2;
                    cnt[i]--;
                }
                while(cnt[i]>0){
                    arr[evenIndex]=temp;
                    evenIndex+=2;
                    cnt[i]--;
                }
            }
        }
        return new String(arr);
    }
}
```
### 复杂度分析
- 时间复杂度：$O(n+∣Σ∣)$，其中 `n` 是字符串的长度，`Σ` 是字符集，在本题中字符集为所有小写字母，`∣Σ∣=26`。遍历字符串并统计每个字母的出现次数，时间复杂度是 $O(n)$。重构字符串需要进行 `n` 次放置字母的操作，并遍历每个字母得到出现次数，时间复杂度是 $O(n+∣Σ∣)$。总时间复杂度是 $O(n+∣Σ∣)$。
- 空间复杂度：$O(∣Σ∣)$，其中 `n` 是字符串的长度，`Σ` 是字符集，在本题中字符集为所有小写字母，`∣Σ∣=26`。这里不计算存储最终答案字符串需要的空间（以及由于语言特性，在构造字符串时需要的额外缓存空间），空间复杂度主要取决于统计每个字母出现次数的数组。